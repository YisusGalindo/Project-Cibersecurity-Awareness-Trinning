---
- name: Campa√±a de Phishing Simulado por Departamentos
  hosts: localhost
  gather_facts: false
  vars:
    departments:
      - name: "TI"
        template: "Actualizaci√≥n cr√≠tica de seguridad del sistema"
        target_users: 15
      - name: "LOGISTICA"
        template: "Confirmaci√≥n de env√≠o urgente"
        target_users: 20
      - name: "FINANZAS"
        template: "Verificaci√≥n de factura pendiente"
        target_users: 12
      - name: "COMPRAS"
        template: "Cotizaci√≥n urgente requerida"
        target_users: 18
      - name: "CUSTOMER SERVICE"
        template: "Queja de cliente - Acci√≥n inmediata requerida"
        target_users: 25
      - name: "SEGURIDAD E HIGIENE"
        template: "Reporte de incidente de seguridad"
        target_users: 8
      - name: "PRODUCCI√ìN"
        template: "Parada de l√≠nea - Revisi√≥n inmediata"
        target_users: 30
      - name: "MANTENIMIENTO"
        template: "Orden de trabajo urgente"
        target_users: 22
      - name: "RH"
        template: "Actualizaci√≥n de pol√≠ticas de empresa"
        target_users: 10
      - name: "EMBARQUE"
        template: "Documentaci√≥n de exportaci√≥n faltante"
        target_users: 16
      - name: "ALMAC√âN"
        template: "Discrepancia en inventario"
        target_users: 28
      - name: "CALIDAD"
        template: "No conformidad detectada - Acci√≥n correctiva"
        target_users: 14
      - name: "RECIBO"
        template: "Material rechazado - Verificaci√≥n requerida"
        target_users: 19

  tasks:
    - name: Iniciar campa√±a de phishing simulado
      debug:
        msg: "üöÄ Iniciando campa√±a de phishing simulado para todos los departamentos"

    - name: Simular env√≠o de correos por departamento
      debug:
        msg: "üìß Enviando {{ item.target_users }} correos a {{ item.name }}: {{ item.template }}"
      loop: "{{ departments }}"

    - name: Configurar servidor de captura de clics
      debug:
        msg: "üåê Configurando servidor web para capturar interacciones"

    - name: Activar monitoreo de eventos
      debug:
        msg: "üìä Sistema de monitoreo activado - Registrando todas las interacciones"

    - name: Campa√±a iniciada exitosamente
      debug:
        msg: "‚úÖ Campa√±a de phishing simulado iniciada para {{ departments | length }} departamentos"