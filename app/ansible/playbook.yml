---
- name: Campaña de Phishing Dirigida - Infinity Air Springs
  hosts: localhost
  gather_facts: false
  vars:
    it_team:
      - name: "Ricardo Carmona"
        email: "ricardo.carmona@infinityairsprings.com"
        role: "Especialista de Redes (NETWORK)"
      - name: "Fernando Herrera"
        email: "fernando.herrera@infinityairsprings.com"
        role: "Gerente de TI"
      - name: "Jesús Galindo"
        email: "jesus.galindo@infinityairsprings.com"
        role: "Practicante de Redes y Soporte"
    
    departments:
      - name: "TI"
        template: "🔒 URGENTE: Actualización crítica de seguridad - Acción requerida"
        target_users: 3
        priority: "ALTA"
      - name: "LOGISTICA"
        template: "📦 Confirmación de envío urgente - Cliente VIP"
        target_users: 20
        priority: "MEDIA"
      - name: "FINANZAS"
        template: "💰 Verificación de factura pendiente - $50,000 USD"
        target_users: 12
        priority: "ALTA"
      - name: "COMPRAS"
        template: "🛒 Cotización urgente requerida - Proveedor estratégico"
        target_users: 18
        priority: "MEDIA"
      - name: "COSTUMER SERVICE"
        template: "😠 Queja de cliente VIP - Acción inmediata requerida"
        target_users: 25
        priority: "ALTA"
      - name: "SEGURIDAD E HIGIENE"
        template: "⚠️ Reporte de incidente de seguridad - Área crítica"
        target_users: 8
        priority: "CRÍTICA"
      - name: "PRODUCCIÓN"
        template: "🏭 Parada de línea crítica - Pérdidas millonarias"
        target_users: 30
        priority: "CRÍTICA"
      - name: "MANTENIEMIENTO"
        template: "🔧 Orden de trabajo urgente - Equipo crítico"
        target_users: 22
        priority: "ALTA"
      - name: "RH"
        template: "👥 Actualización de políticas - Cambios salariales"
        target_users: 10
        priority: "MEDIA"
      - name: "EMBARQUE"
        template: "🚢 Documentación de exportación faltante - Contenedor retenido"
        target_users: 16
        priority: "ALTA"
      - name: "ALMACÉN"
        template: "📋 Discrepancia crítica en inventario - Auditoría"
        target_users: 28
        priority: "MEDIA"
      - name: "CALIDAD"
        template: "✅ No conformidad crítica - Cliente rechaza lote"
        target_users: 14
        priority: "CRÍTICA"
      - name: "RECIBO DE MATERIALES"
        template: "📥 Material rechazado - Verificación urgente requerida"
        target_users: 19
        priority: "ALTA"

  tasks:
    - name: 🚀 Iniciar campaña de phishing dirigida
      debug:
        msg: "🎯 INICIANDO CAMPAÑA DE PHISHING DIRIGIDA - INFINITY AIR SPRINGS"

    - name: 👥 Configurar objetivos del equipo de TI
      debug:
        msg: "🎯 Objetivo IT: {{ item.name }} ({{ item.role }}) - {{ item.email }}"
      loop: "{{ it_team }}"
    - name: 📧 Configurar campañas por departamento
      debug:
        msg: "📧 {{ item.name }} [{{ item.priority }}]: {{ item.template }} ({{ item.target_users }} usuarios)"
      loop: "{{ departments }}"

    - name: 🌐 Configurar servidor de captura de interacciones
      debug:
        msg: "🌐 Servidor de captura configurado - Monitoreando clics, reportes e ignorados"

    - name: 📊 Activar sistema de monitoreo avanzado
      debug:
        msg: "📊 Monitoreo en tiempo real activado - Base de datos SQLite configurada"

    - name: ✅ Campaña iniciada exitosamente
      debug:
        msg: "✅ CAMPAÑA ACTIVA: {{ departments | length }} departamentos | Equipo IT: {{ it_team | length }} objetivos principales"

    - name: 🔍 Resumen de la campaña
      debug:
        msg: |
          🎯 CAMPAÑA DE PHISHING - INFINITY AIR SPRINGS
          ================================================
          📧 Total de departamentos: {{ departments | length }}
          👥 Equipo IT (objetivos principales): {{ it_team | length }}
          🚨 Departamentos de prioridad CRÍTICA: 3
          ⚠️  Departamentos de prioridad ALTA: 6
          📊 Sistema de monitoreo: ACTIVO
          🌐 Servidor de captura: CONFIGURADO
          ================================================